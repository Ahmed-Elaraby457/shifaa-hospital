<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø§Ù„Ø§Øª</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
    :root{
      --blue1:#0077b6;
      --blue2:#0096c7;
      --bg:#f0fbff;
      --red:#e63946;
    }
    *{box-sizing:border-box;}
    body{
      font-family:'Cairo',sans-serif;
      background:var(--bg);
      margin:0;
      padding:0;
      color:#023047;
      display:flex;
      flex-direction:column;
      align-items:center;
      min-height:100vh;
    }
    header{
      background:linear-gradient(135deg,var(--blue1),var(--blue2));
      color:white;
      text-align:center;
      padding:25px;
      box-shadow:0 4px 15px rgba(0,0,0,0.1);
      width:100%;
    }
    header h1{margin:0;font-size:2rem;}
    nav{
      display:flex;
      justify-content:center;
      background:white;
      padding:10px;
      box-shadow:0 2px 5px rgba(0,0,0,0.1);
      width:100%;
      flex-wrap:wrap;
    }
    nav a{
      color:var(--blue1);
      margin:5px 10px;
      text-decoration:none;
      font-weight:bold;
      transition:0.3s;
    }
    nav a:hover{color:#023e8a;}
    main{
      background:white;
      border-radius:20px;
      padding:30px;
      margin:40px 20px;
      max-width:900px;
      width:100%;
      box-shadow:0 4px 15px rgba(0,0,0,0.1);
    }
    h2{text-align:center;color:var(--blue1);}
    table{
      width:100%;
      border-collapse:collapse;
      margin-top:20px;
    }
    th,td{
      padding:12px;
      text-align:center;
      border-bottom:1px solid #ddd;
    }
    th{
      background:#e0f7ff;
      color:#023047;
    }
    tr:hover{background:#f7faff;}
    button{
      background:var(--blue1);
      color:white;
      border:none;
      padding:8px 15px;
      border-radius:6px;
      cursor:pointer;
      transition:0.3s;
    }
    button:hover{background:var(--blue2);}
    .delete-btn{
      background:var(--red);
    }
    .delete-btn:hover{
      background:#c1121f;
    }
    form{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:10px;
      margin-bottom:25px;
    }
    input,textarea{
      padding:10px;
      border:1px solid #ccc;
      border-radius:6px;
      font-family:'Cairo',sans-serif;
      width:100%;
    }
    #searchInput{
      width:100%;
      padding:10px;
      margin:10px 0 25px;
      border:1px solid #ccc;
      border-radius:8px;
      font-size:1rem;
    }
    #popup, #confirmDelete{
      position:fixed;
      top:0;left:0;
      width:100%;height:100%;
      background:rgba(0,0,0,0.4);
      display:flex;
      justify-content:center;
      align-items:center;
      visibility:hidden;
      opacity:0;
      transition:0.4s;
      z-index:10;
    }
    #popup.active, #confirmDelete.active{
      visibility:visible;
      opacity:1;
    }
    .popup-content{
      background:white;
      padding:25px;
      border-radius:15px;
      width:90%;
      max-width:400px;
      box-shadow:0 0 20px rgba(0,0,0,0.2);
      text-align:center;
      animation:fadeIn 0.4s ease;
      position:relative;
    }
    @keyframes fadeIn{
      from{transform:scale(0.8);opacity:0;}
      to{transform:scale(1);opacity:1;}
    }
    .popup-content textarea{
      width:100%;
      height:120px;
      resize:none;
      padding:10px;
      border:1px solid #ccc;
      border-radius:8px;
      font-family:'Cairo',sans-serif;
      margin-top:10px;
    }
    .close-btn{
      position:absolute;
      top:10px;
      left:15px;
      font-size:1.3rem;
      cursor:pointer;
      color:#555;
    }
    .close-btn:hover{color:#000;}
    footer{
      margin-top:auto;
      background:var(--blue1);
      color:white;
      width:100%;
      text-align:center;
      padding:15px;
      font-size:0.9rem;
    }
    @media (max-width:600px){
      th, td {font-size:0.9rem;padding:8px;}
      button{padding:6px 10px;font-size:0.9rem;}
    }
  </style>
</head>
<body>

<header>
  <h1>Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø§Ù„Ø§Øª</h1>
</header>

<nav>
  <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  <a href="about.html">Ø¹Ù† Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰</a>
  <a href="services.html">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
  <a href="appointment.html">Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ùƒ</a>
  <a href="doctors.html">Ø§Ù„Ø§Ù‚Ø³Ø§Ù…</a>
  <a href="contact.html">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a>
</nav>

<main>
  <h2>Ø¥Ø¶Ø§ÙØ© Ø­Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
  <form id="addForm">
    <input type="text" id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙŠØ¶" required>
    <input type="number" id="age" placeholder="Ø§Ù„Ø¹Ù…Ø±" required>
    <input type="text" id="diag" placeholder="Ø§Ù„ØªØ´Ø®ÙŠØµ" required>
    <input type="text" id="notes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ¨">
    <button type="submit">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ø§Ù„Ø©</button>
  </form>

  <input type="text" id="searchInput" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙŠØ¶ Ø£Ùˆ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø£Ùˆ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª...">

  <h2>Ø³Ø¬Ù„ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø±Ø¶Ù‰</h2>
  <table id="casesTable">
    <thead>
      <tr>
        <th>Ø§Ù„Ø§Ø³Ù…</th>
        <th>Ø§Ù„Ø¹Ù…Ø±</th>
        <th>Ø§Ù„ØªØ´Ø®ÙŠØµ</th>
        <th>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
        <th>ØªØ­Ø¯ÙŠØ«</th>
        <th>Ø­Ø°Ù</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div style="text-align:center;margin-top:15px;">
    <button class="delete-btn" onclick="confirmDeleteAll()">ğŸ§¹ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</button>
  </div>
</main>

<!-- Ù†Ø§ÙØ°Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª -->
<div id="popup">
  <div class="popup-content">
    <span class="close-btn" onclick="closePopup()">&times;</span>
    <h3>ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©</h3>
    <textarea id="notesInput" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ¨ Ù‡Ù†Ø§..."></textarea>
    <button onclick="saveNotes()">Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</button>
  </div>
</div>

<!-- Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù -->
<div id="confirmDelete">
  <div class="popup-content">
    <h3>Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ</h3>
    <div style="margin-top:15px;">
      <button class="delete-btn" onclick="deleteCase()">Ù†Ø¹Ù…ØŒ Ø§Ø­Ø°Ù</button>
      <button onclick="closeConfirm()">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
  </div>
</div>

<footer>
  Â© 2025 Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø´ÙØ§Ø¡ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
</footer>

<script>
const tableBody = document.querySelector("#casesTable tbody");
const popup = document.getElementById("popup");
const notesInput = document.getElementById("notesInput");
const addForm = document.getElementById("addForm");
const confirmDelete = document.getElementById("confirmDelete");
const searchInput = document.getElementById("searchInput");

let selectedCaseIndex = null;
let cases = JSON.parse(localStorage.getItem("cases")) || [];

function renderTable(filteredCases = cases) {
  tableBody.innerHTML = "";
  if(filteredCases.length === 0){
    tableBody.innerHTML = "<tr><td colspan='6'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø§Ù„Ø§Øª</td></tr>";
  } else {
    filteredCases.forEach((c, i) => {
      const row = `
        <tr>
          <td>${c.name}</td>
          <td>${c.age}</td>
          <td>${c.diag}</td>
          <td>${c.notes}</td>
          <td><button onclick="openPopup(${i})">âœï¸ ØªØ­Ø¯ÙŠØ«</button></td>
          <td><button class='delete-btn' onclick="openConfirm(${i})">ğŸ—‘ï¸ Ø­Ø°Ù</button></td>
        </tr>
      `;
      tableBody.insertAdjacentHTML("beforeend", row);
    });
  }
}
renderTable();

// Ø¨Ø­Ø« ÙÙˆØ±ÙŠ
searchInput.addEventListener("input", ()=>{
  const term = searchInput.value.trim().toLowerCase();
  const filtered = cases.filter(c =>
    c.name.toLowerCase().includes(term) ||
    c.diag.toLowerCase().includes(term) ||
    c.notes.toLowerCase().includes(term) ||
    c.age.toString().includes(term)
  );
  renderTable(filtered);
});

// Ø¥Ø¶Ø§ÙØ© Ø­Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
addForm.addEventListener("submit", (e)=>{
  e.preventDefault();
  const newCase = {
    name: document.getElementById("name").value.trim(),
    age: document.getElementById("age").value.trim(),
    diag: document.getElementById("diag").value.trim(),
    notes: document.getElementById("notes").value.trim()
  };
  if(newCase.name && newCase.age && newCase.diag){
    cases.push(newCase);
    localStorage.setItem("cases", JSON.stringify(cases));
    renderTable();
    addForm.reset();
  }
});

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©
function openPopup(index) {
  selectedCaseIndex = index;
  notesInput.value = cases[index].notes || "";
  popup.classList.add("active");
}
function closePopup() { popup.classList.remove("active"); }
function saveNotes() {
  const newNotes = notesInput.value.trim();
  if (newNotes) {
    cases[selectedCaseIndex].notes = newNotes;
    localStorage.setItem("cases", JSON.stringify(cases));
    renderTable();
    closePopup();
  }
}

// Ø­Ø°Ù Ø­Ø§Ù„Ø© ÙˆØ§Ø­Ø¯Ø©
function openConfirm(index) {
  selectedCaseIndex = index;
  confirmDelete.classList.add("active");
}
function closeConfirm() { confirmDelete.classList.remove("active"); }
function deleteCase() {
  cases.splice(selectedCaseIndex, 1);
  localStorage.setItem("cases", JSON.stringify(cases));
  renderTable();
  closeConfirm();
}

// Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª
function confirmDeleteAll() {
  if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§ØªØŸ")) {
    cases = [];
    localStorage.removeItem("cases");
    renderTable();
  }
}
</script>

</body>
</html>
